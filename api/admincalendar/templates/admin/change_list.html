{% extends "admin/change_list.html" %}
{% load i18n admin_urls static admin_list admincalendar_tags %}

{% block content %}
    {{ block.super }}


{% block result_list %}
  {% if cl.model_admin.admin_calendar_fields %}
    <div id='calendar-admin'></div>
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.9.0/main.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.9.0/main.min.js"></script>

    <script type="text/javascript">

    var CALENDAR_ADMIN_EVENTS = {% calendar_admin_events cl %};

    document.addEventListener('DOMContentLoaded', function() {
      var calendarEl = document.getElementById('calendar-admin');

      var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        initialDate: '2021-07-07',
        headerToolbar: {
          left: 'prev,next today',
          center: 'title',
          right: 'dayGridMonth,timeGridWeek,timeGridDay'
        },
        events: CALENDAR_ADMIN_EVENTS,
      });

      calendar.render();
    });
    </script>
  {% else %}
    {{ block.super }}
  {% endif %}
{% endblock %}
{% endblock %}
